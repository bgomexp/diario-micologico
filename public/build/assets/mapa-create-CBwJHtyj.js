const c=37.348233107188335,d=-5.843708844167294;let n=L.map("map").setView([c,d],13),t,a=L.icon({iconUrl:"/images/marker-logo.png",iconSize:[30,40],iconAnchor:[15,40],popupAnchor:[0,-40]});L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap"}).addTo(n);L.Control.geocoder({defaultMarkGeocode:!1}).on("markgeocode",function(e){var o=e.geocode.center;n.setView(o,14),t?t.setLatLng(o):t=L.marker(o,{icon:a}).addTo(n),document.getElementById("lat").value=o.lat,document.getElementById("lng").value=o.lng}).addTo(n);n.on("click",function(e){const o=e.latlng.lat,l=e.latlng.lng;t?t.setLatLng([o,l]):t=L.marker([o,l],{icon:a}).addTo(n),document.getElementById("lat").value=o,document.getElementById("lng").value=l});document.querySelector("#btnUbiActual").addEventListener("click",e=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(i,r):x.innerHTML="Lo sentimos, la geolocalización no es compatible con este navegador."});function i(e){n.setView([e.coords.latitude,e.coords.longitude],13),t?t.setLatLng([e.coords.latitude,e.coords.longitude]):t=L.marker([e.coords.latitude,e.coords.longitude],{icon:a}).addTo(n),document.getElementById("lat").value=e.coords.latitude,document.getElementById("lng").value=e.coords.longitude}function r(){console.log("Lo sentimos, la ubicación no está disponible.")}document.querySelector("#btnResetUbi").addEventListener("click",e=>{n.setView([c,d],13),t&&(t.remove(),t=null),document.getElementById("lat").removeAttribute("value"),document.getElementById("lng").removeAttribute("value")});
