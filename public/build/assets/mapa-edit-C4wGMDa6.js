let r=!1,c=37.348233107188335,d=-5.843708844167294;document.querySelector("#lat").value!=""&&document.querySelector("#lng").value!=""&&(c=document.querySelector("#lat").value,d=document.querySelector("#lng").value,r=!0);let o=L.map("map").setView([c,d],13),t,n=L.icon({iconUrl:"/images/marker-logo.png",iconSize:[30,40],iconAnchor:[15,40],popupAnchor:[0,-40]});L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap"}).addTo(o);r&&(t=L.marker([c,d],{icon:n}).addTo(o));L.Control.geocoder({defaultMarkGeocode:!1}).on("markgeocode",function(e){var l=e.geocode.center;o.setView(l,14),t?t.setLatLng(l):t=L.marker(l,{icon:n}).addTo(o),document.getElementById("lat").value=l.lat,document.getElementById("lng").value=l.lng}).addTo(o);o.on("click",function(e){const l=e.latlng.lat,a=e.latlng.lng;t?t.setLatLng([l,a]):t=L.marker([l,a],{icon:n}).addTo(o),document.getElementById("lat").value=l,document.getElementById("lng").value=a});document.querySelector("#btnUbiActual").addEventListener("click",e=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(i,u):x.innerHTML="Lo sentimos, la geolocalización no es compatible con este navegador."});function i(e){o.setView([e.coords.latitude,e.coords.longitude],13),t?t.setLatLng([e.coords.latitude,e.coords.longitude]):t=L.marker([e.coords.latitude,e.coords.longitude],{icon:n}).addTo(o),document.getElementById("lat").value=e.coords.latitude,document.getElementById("lng").value=e.coords.longitude}function u(){console.log("Lo sentimos, la ubicación no está disponible.")}document.querySelector("#btnResetUbi").addEventListener("click",e=>{o.setView([37.348233107188335,-5.843708844167294],13),t&&(t.remove(),t=null),document.getElementById("lat").value="",document.getElementById("lng").value=""});
